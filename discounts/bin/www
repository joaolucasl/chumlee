#!/usr/bin/env node

const server = require('../src/index.js')
const http = require('http')
const mongoose = require('mongoose')
const env = require('yenv')()

const port = (process.env.PORT || '3000')


const init = async () => {
    await mongoose.connect(env.MONGO_URI, { useNewUrlParser: true })
    
    server.listen(`${env.HOST}:${env.PORT}`)

    console.log(`Server is listening on port ${env.PORT}`)
}

init().catch((err) => {
    console.error(err)
    process.exit(1)
})